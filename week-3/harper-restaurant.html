<!--
  Title: harper-restaurant.html
  Author: James Harper
  Date: 6/10/2023
  Description: Web 330 - Assignment 3.2
-->

<!-- Establishes the type of document -->
<!DOCTYPE html>
<!-- Sets the document type as HTML in english -->
<html lang="en">

<!-- Defines the metadata information such as document title, character set, styles, scripts,
  and other meta information.
-->
  <head>
    <!-- Defines the title of the document -->
    <title>WEB 330 - Enterprise Javascript II: Assignment 2.2</title>
    <!-- Links the stylesheet to the HTML document -->
    <link rel="stylesheet" href="../styles/site.css" type="text/css">
    <link rel="stylesheet" href="../styles/theme.css" type="text/css">
    <link rel="stylesheet" href="./harper-restaurant.css" type="text/css">
    <!-- The link acquires the Roboto font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  </head>

  <body class="light-theme">

    <div class="assign-container">
      <i onclick="toggleMode(this)" id="icon-mode" class="fa fa-toggle-off pull-right" style="font-size: 28px;"><span id="icon-text">
      </span></i>
      <br>
      <h1 class="app-header">Welcome to the Restaurant App!</h1>
<!-- Next four cards that have check box labels. -->
        <div class="assign-content">
          <div class="card">
            <div class="card-title">Restaurant Menu</div>
            <div class="card-content" id="content-container-one">
              <div class="card">
                <div class="card-title">Beverages</div>
                <div class="card-content">
                  <div class="form">
                    <div class="form-field" id="beverages">
                      <input type="checkbox" name="soda" id="soda" value="3.30">
                      <label for="soda">Soda ($3.30)</label>
                      <br>
                      <input type="checkbox" name="sweetTea" id="sweetTea" value="3.30">
                      <label for="sweetTea">Sweet Tea ($3.30)</label>
                      <br>
                      <input type="checkbox" name="icedCoffee" id="icedCoffee" value="2.19">
                      <label for="icedCoffee">Iced Coffee ($2.19)</label>
                      <br>
                      <input type="checkbox" name="bottledWater" id="bottledWater" value="2.15">
                      <label for="bottledWater">Bottled Water ($2.15)</label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="card-title">Appetizers</div>
                <div class="card-content">
                  <div class="form">
                    <div class="form-field" id="appetizers">
                      <input type="checkbox" name="nachos" id="nachos" value="6.60">
                      <label for="nachos">Nachos ($6.60)</label>
                      <br>
                      <input type="checkbox" name="chipsSalsa" id="chipsSalsa" value="5.50">
                      <label for="chipsSalsa">Chips and Salsa ($5.50)</label>
                      <br>
                      <input type="checkbox" name="pretzelCheese" id="pretzelCheese" value="8.80">
                      <label for="pretzelCheese">Pretzel with Cheese ($8.80)</label>
                      <br>
                      <input type="checkbox" name="friedPickles" id="friedPickles" value="8.25">
                      <label for="friedPickles">Fried Pickles ($8.25)</label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="card-title">Main Courses</div>
                <div class="card-content">
                  <div class="form">
                    <div class="form-field" id="main-courses">
                      <input type="checkbox" name="streetTacos" id="streetTacos" value="9.70">
                      <label for="streetTacos">Street Tacos ($9.70)</label>
                      <br>
                      <input type="checkbox" name="bonelessWings" id="bonelessWings" value="12.80">
                      <label for="bonelessWings">Boneless Wings ($12.80)</label>
                      <br>
                      <input type="checkbox" name="burgerFries" id="burgerFries" value="12.65">
                      <label for="burgerFries">Cheese Burger with Fries ($12.65)</label>
                      <br>
                      <input type="checkbox" name="chickenWrapSalad" id="chickenWrapSalad" value="9.65">
                      <label for="chickenWrapSalad">Chicken Wrap with Salad ($9.65)</label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="card-title">Desserts</div>
                <div class="card-content">
                  <div class="form">
                    <div class="form-field" id="desserts">
                      <input type="checkbox" name="iceCream" id="iceCream" value="4.30">
                      <label for="iceCream">Ice Cream ($4.30)</label>
                      <br>
                      <input type="checkbox" name="chocolateCake" id="chocolateCake" value="5.40">
                      <label for="chocolateCake">Chocolate Cake ($5.40)</label>
                      <br>
                      <input type="checkbox" name="applePie" id="applePie" value="3.30">
                      <label for="applePie">Apple Pie ($3.30)</label>
                      <br>
                      <input type="checkbox" name="pudding" id="pudding" value="3.10">
                      <label for="pudding">Pudding ($3.10)</label>
                    </div>
                  </div>
                </div>
              </div>
          </div>
          <div class="btn">
            <button class= "btn-primary full-width" id="btnOrder">Place Order</button>
          </div>
        </div>
    </div>

    <div id="link-container">
      <!-- Clickable link to return home directory on GitHub. -->
      <a href="https://Jharp949.github.io/web-330" class="return-home">Return</a>
    </div>

    <div class="assign-container">
      <div class="assign-content">
        <div class="card">
          <div class="card-title">Order Summary</div>
            <div class="card-content assign-results-text" id="order-total">
            </div>
        </div>
      </div>
    </div>

    <script src="../scripts/theme.js"></script>

    <script>
      /**
      * Set the default theme to light if one has not been set in the browsers localStorage
      */
      setDefaultTheme();

      /**
       * Function to switch the users selected website theme
       * @param x (this instance)
       */
      function toggleMode(x)
      {
          let colorTheme = document.body.classList; // get the body's CSS class
          let iconMode = x.classList; // get the current classes assigned to the triggered button

          /**
           * If the current body class is set to the light-theme, update the user's preference to the dark-theme in the browsers
           * local storage.
           */
          if (colorTheme.value === "light-theme")
          {
              localStorage.clear();
              localStorage.setItem("mode", "dark-theme");
              localStorage.setItem("iconMode", "fa-toggle-on");
              localStorage.setItem("iconText", "Dark Mode");
          }
          /**
           * If the current body class is set to the dark-theme, update the user's preference to the light-theme in the browsers
           * local storage.
           */
          else
          {
              localStorage.clear();
              localStorage.setItem("mode", "light-theme");
              localStorage.setItem("iconMode", "fa-toggle-off");
              localStorage.setItem("iconText", "Light Mode");
          }

          /**
           * Apply the updated selection to the HTML page elements
           */
          colorTheme.value = localStorage.getItem("mode");
          iconMode.value = `fa ${localStorage.getItem("iconMode")} pull-right`;
          document.getElementById("icon-text").innerHTML = localStorage.getItem("iconText");
      }
    </script>

    <!-- Imports JS files to the HTML document -->
    <script type='module'>
      import { Bill, Beverage, Appetizer, MainCourse, Dessert } from './index.js';
      //assigns onclick event function to the button with id of btnOrder.
      document.getElementById('btnOrder').onclick = function() {
        //Variables that parse through each selected id. Then add the selected input to a variable.
        const beveragesEl = document.getElementById('beverages');
        const beverages = beveragesEl.getElementsByTagName('input');
        const appetizersEl = document.getElementById('appetizers');
        const appetizers = appetizersEl.getElementsByTagName('input');
        const mainCoursesEl = document.getElementById('main-courses');
        const mainCourses = mainCoursesEl.getElementsByTagName('input');
        const dessertsEl = document.getElementById('desserts');
        const desserts = dessertsEl.getElementsByTagName('input');
        //new class based on the class from harper-bill.js
        let bill = new Bill(beverages, appetizers, mainCourses, desserts);
        //for loop which adds the value of each checked box to the total variable.
        for (let beverage of beverages) {
          if (beverage.checked) {
            bill.addBeverage(new Beverage(beverage.name, beverage.value));
          }
        }

        for (let appetizer of appetizers) {
          if (appetizer.checked) {
            bill.addAppetizer(new Appetizer(appetizer.name, appetizer.value));
          }
        }

        for (let mainCourse of mainCourses) {
          if (mainCourse.checked) {
            bill.addMainCourse(new MainCourse(mainCourse.name, mainCourse.value));
          }
        }

        for (let dessert of desserts) {
          if (dessert.checked) {
            bill.addDessert(new Dessert(dessert.name, dessert.value));
          }
        }
        //Function that calls getTotal from harper-bill.js.
        let total = bill.getTotal();
        //assigns the total value to the element with an id of order-total.
        document.getElementById('order-total').innerHTML = 'Your order total is $' + total.toFixed(2);
      }

    </script>
  </body>
</html>
